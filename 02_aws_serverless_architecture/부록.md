# AWS 서비스

- API Gateway
  - 스테이징
  - 캐싱 및 스로ㅓ틀링
  - 리소스와 메소드(GET, POST) 중심
  - Lambda와 통합
- SNS
  - pub-sub방식
  - 최소 한 번 전송: 여러번 전송될 수 있음
- S3
  - 이벤트를 보낼 수 있음
  - ACL 및 버킷 정책 사용
  - 객체는 데이터 + 메타 데이터 + 키로 조합됨
- SQS
  - 메시지 큐 서비스
  - 최소 한 번 보장
  - 최대 256kb의 메시지 페이로드
  - 메시지 수명주기 제어 가능
- SES
  - 이메일 주고 받는 서비스
  - 스팸 및 바이러스 검사
  - 메시지의 속도와 건수를 규제
- RDS와 DynamoDB
  - RDS
    - 다양한 RDB지원
    - 모니터링 스냅샷 multi-az지원
    - 생성 삭제 장애복구등에 대한 이벤트 지원 가능
  - Dynamo DB
    - 각 item은 고유함
    - Lambda와 통합 가능
- Cloudsearch
  - AWS의 검색 솔루션
  - 전체 텍스트 검색, 패싯, 강조 표시 등
- Elastic Transcoder
  - 미디어를 변환
- Kinesis Streams
  - 대규모 데이터 스트리밍의 실시간 처리를 위한 서비스
  - SQS보다 메시지에 대한 세분화된 제어가 가능
  - 샤드를 통해 스트림의 처리용량 지정
- Cognito
  - 인증 관리 서비스
  - 다른 계정 서비스 제공 업체와 통합 됨
- Auth0
  - ID 관리 제품
  - 자체 DB 사용
- Firebase
  - NoSQL 실시간 데이터베이스

---

# 설치 및 구성

- IAM 사용자 및 CLI설정
- 사용자 권한 설정
- S3 버킷 생성
- IAM 역할 만들기
- Lambda
- Elastic Transcoder
- npm 설정

---

# 인증 및 권한부여에 대한 추가 정보

- 인증 및 권한부여
  - 모든 요청과 응답에 인증된 토큰이 포함되어야 함
  - 인증은 사용자가 누구인지 확인하는 프로세스
  - 권한 부여는 사용자가 수행할 수 있는 작업 확인
  - OAuth2.0d은 인증뿐만 아니라 권한부여에도 사용할 수 있음
- JSON 웹토큰
  - JWT는 URL safe함
  - 소형 독립적
  - 무결성 보장하기위해 서명 및 암호화 가능
  - 표준
  - 인코딩 후 서명으로 암호화
  
---

# Lambda의 내부

- 시스템 정보 cmd로 출력
- 제약사항
  - /tmp 512MB
  - 요청 및 응답의 페이로드 크기
  - 최대 실행 시간
  - 스레드 수
- 이전 실행 환경에서의 작동
- 성공 / 실패 / 완료 트리거

---

# 모델과 매핑

- 쿼리 스트링 헤더 스테이지 변수등으로 매핑할 수 있음
- 통합응답으로 하나의 response를 만들 수 있다.

---

# s3 이벤트 메시지 구조

- 이벤트를 발생시킨 사용자
- 요청이 시작된 IP 주소
- 요청id
- 버킷 알림 구성 id
- 버킷 소유자
- 버킷 arn 시퀀서
- 버전
- 키값
- 이벤트 시간

---

# 서버리스 프레임워크와 SAM 사용
