# CH09 5단계: 분석, 머신러닝 및 역ETL을 위한 데이터 서빙

1. BI
2. 머신러닝 데이터 제공
3. 역 ETL을 통한 데이터 제공

---

## 데이터 서빙의 일반적인 고려사항

---

### 신뢰

---

- 최종 사용자가 데이터를 신뢰해야 함
- 데이터 유효성 검사 및 데이터 관찰 가능성 프로세스 활용하여 시각적으로 확인할 것
- SLA, SLO에 대한 신뢰를 쌓아야 함
  - 데이터 파이프라인 가용시간은 99%이고 95%의 결함이 없음

### 사용 사례는 무엇이며, 사용자는 누구인가?

---

- 데이터의 최종사용자는 누구인가?
  - 배달엡에서 2분안에 구매를 유도하는 쿠폰을 받을 수 있을까?
- **어떤 작업을 트리거하며 누가 수행할 것인가**
  - 가능한한 높은 ROI를 얻을 수 있는 것에 초점

### 데이터 제품

---

- 제품과 비즈니스의 혼합물에 기술을 융합하는 종합적인 작업
- **실행해야 할 작업**에 초점

### 셀프서비스 여부

---

- **적절한 사용자를 확보**하는 것이 성공의 요인
- 셀프서비스의 목표가 무엇인가?

### 데이터 정의 및 논리

---

- data definition = 조직 전체에서 이해되는 데이터의 의미
- data logic = 데이터로부터 측정지표를 도출하는 공식을 규정
- institutional knoweldge 지식의 형태로 전달되어 데이터 기반의 인사이트 의사결정 및 행동을 대신한 일화
- 쿼리, 대시보드, ML모델에 데이터를 제공할 때마다 암묵적으로 제공되기도 함

### 데이터 메시

---

- 다른 팀에 데이터를 넘길 수 있어야 함
- 셀프서비스를 잠재적으로라도 실행할 수 있는 환경이 있어야 함

## 분석

---

- 최종 사용 사례를 파악할 것

### 비즈니스 분석

---

- 과거 데이터와 현재 데이터를 사용해 전략적이고 실행 가능한 결정을 내리기
- 대시보드
- ad-hoc 분석

### 운영 분석

---

- 즉각적인 조치를 취하는 것 ex) 실시간 어플리케이션 모니터링
- 원단 재고의 품질 개선을 위한 실시간 불량 검출

### 임베디드 분석

---

- 사용자에게 보여지는 대시보드 = 데이터 어플리케이션 ex) 스마트 온도 조절기, 가게 재고 현황
- 성능 요구
  - 낮은 지연시간: 실시간 성인 요구
  - 쿼리 성능: 매개변수 조정할 때 얼마나 빨리 나오는지
  - 동시성: 수많은 고객

## 머신러닝

---

- ML 수명 주기 전체를 처리
- featurization

## 데이터 엔지니어가 ML에 관해 알아야 할 사항

---

- 학습 종류
- ML/DL
- auto ml
- encoding
- ml 수명주기
- 온라인 학습 등

## 분석 및 ML을 위한 데이터 서빙 방법

---

### 파일 교환

---

- 객체 스토리지를 통한 파일 교환은 `데이터 공유`로 간주하고 더 간소화된 과정임

### 데이터베이스

---

- OLAP기준
  - 스키마를 통해 데이터와 순서와 구조를 부여
  - 세분화된 권한 제어
  - 높은 쿼리 동시성
- 분석가끼리 서로 간섭되지 않는 환경

### 스트리밍 시스템

---

- emitted metric

### 쿼리 페더레이션

---

- query federation
  - 쿼리가 원천의 리소스를 과도하게 소비하지 않도록 해야 함
  - 데이터를 유연하게 분석하고 싶거나 원천 데이터를 엄격하게 제어할 때 이상적
  - 보안상 읽기만 제공할 때도 유용

### 데이터 공유

---

### 시맨틱과 메트릭 계층

---

- 메트릭 계층은 비즈니스 로직을 유지 및 계산하는 도구
  - LookML, DBT

### 노트북에서의 데이터 서빙

---

- 노트북으로부터 API, DB, DW, DL등을 접근할 수 있어야 함
- 자격증명처리에 대한 표준을 만들어야 함

## 역 ETL

---

- 본질적으로 피드백 루프가 생김

## 함께 작업하는 사람

--

- 이해관계자(DA, DS, ML, Business)를 지원하는 역할
  - 최고 품질의 데이터
  - 데이터 재수집 및 재서빙되는 역할
  - 데이터 서비스 책임을 효과적으로 수행하도록 환경 구축

## 드러나지 않는 요소

---

- 보안
  - 최소권한 원칙
- 데이터 관리
- 데이터 옵스
  - 데이터 관리를 운영함
    - 데이터 상태 다운타임
    - 서빙하는 시스템의 지연
    - 데이터 품질
    - SLO
- 데이터 아키텍처
  - 피드백 루프고 바르고 긴밀하고 데이터에 최대한 빨리 점근해야 함
  - 클라우드 환경에서 테스트 및 배포할 수 있도록 적절한 운영 아키텍처를 구축할 것
- 오케스트레이션
  - 팀 간에 데이터 흐름을 조정하느 수단
  - 중앙 집중식으로 할 경우 관리포인트가 늘어남
- 소프트웨어 엔지니어링
  - 추상화된 SQL을 어떻게 최적화 할 지

## 결론

---

- 개선 <-> 구축 <-> 학습 루프
